var argv = require('yargs');

var env = argv.env || process.env.NODE_ENV || 'development';

module.exports = {
    "properties" : {
        //
        //  Main settings
        //
        "port" : {
            "type" : "number",
            "minimum" : 80,
            "maximum" : 8000,
            "message": "Must be between 80..8000",
            "default": 3000,
            "required": true
        },
        "salt" : {
            "minLength" : 4,
            "default": "auto",
            "required": true
        },
        "uploadDir" : {
            "pattern" : /[a-z0-9\/]{4,}/,
            "default": `uploads/${env}`,
            "required": true
        },

        //
        //  Redis
        //
        "redis.host" : {
            "default": "localhost",
            "required" : true
        },
        "redis.port" : {
            "type" : "number",
            "default": 6379,
            "required" : true
        },
        "redis.lifetime": {
            "type" : "number",
            "default" : env != 'test' ? 3600 : 1,
            "required" : true
        },

        //
        //  Mysql
        //
        "mysql.host": {
            "default": "localhost",
            "required" : true
        },
        "mysql.port": {
            "type" : "number",
            "default": 3306,
            "required" : true
        },
        "mysql.username": {
            "default": "root",
            "required" : true
        },
        "mysql.password": {
            "hidden" : true,
            "required" : true
        },
        "mysql.database": {
            "default": `kangaroocourt_${env}`,
            "required" : true
        },

        //
        //  Facebook
        //
        "facebook.client_id" : {
            "pattern" : /\d{12}/,
            "required" : false
        },
        "facebook.client_secret" : {
            "pattern" : /[a-f0-9]{32}/,
            "required" : false
        },
        "facebook.redirect_uri" : {
            "minLength" : 12,
            "required" : false
        },

        //
        //  Mandrill
        //
        "mandrill.key" : {
            "pattern" : /\d{12}/,
            "required" : false
        }
    }
};
